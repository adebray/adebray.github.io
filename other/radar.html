<!DOCTYPE html>
<html>
<body>
<p>Someday, this will be a working Sleep Radar grapher.</p>
<canvas id="myCanvas" width="500" height="450">
Your browser does not support the HTML5 canvas tag.</canvas>
<table border="1" title="Legend">
<tr>
<td bgcolor="#F2E65E">Daytime, awake</td>
<td bgcolor="#A2960E">Daytime, asleep</td>
</tr>
<tr>
<td bgcolor="#5E6AF2"><font color="#FFFFFF">Nighttime, awake</font></td>
<td bgcolor="#0E1AA2"><font color="#FFFFFF">Nighttime, asleep</font></td>
</tr>
</table>

<script>
i = 360;
index = 0;

/* Colors:
	Awake: #F2E65E
	Asleep: #5E6AF2
	Awake, daytime: #F2E65E
	Awake, nighttime:#5E6AF2
	Asleep, daytime: #A2960E
	Asleep, nighttime: #0E1AA2
 */
//Generated by a Python script. Beep boop.
data = new Array(786.0,1200.0,1506.0,1620.0,2225.0,2610.0,2938.0,3105.0,3663.0,3990.0,4379.0,4522.0,5101.0,5430.0,5819.0,5935.0,6540.0,6900.0,7260.0,7408.0,7978.0,8340.0,8701.0,8818.0,9417.0,9810.0,10142.0,10245.0,10855.0,11235.0,11583.0,11775.0,12294.0,12615.0,13024.0,13075.0,13395.0,13460.0,13732.0,14120.0,14465.0,14540.0);
colors = new Array("#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E","#A2960E","#F2E65E","#5E6AF2","#0E1AA2","#A2960E","#F2E65E");
done = 14760;

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
//Draws the circle
ctx.beginPath()
ctx.arc(250,250,150,0,2*Math.PI);
ctx.stroke();
ctx.closePath();
//And the hours
ctx.beginPath();
ctx.font="14px Arial"
for(var j = 3;j <= 24;j += 3) {
	var n = (j+18)/12.0*Math.PI;
	ctx.fillText(""+j,250+175*Math.cos(n)-n/2,250+175*Math.sin(n)+n/2);
}
ctx.closePath();
updateDay(0);
//Perhaps draw fewer things for greater speed?
var int = self.setInterval(function(){tick()},0);
//Yeah, yeah, this could be more concise!
function tick() {
	i++;
	if (i < done) {
		if (i%1440 == 0) {
			updateDay(i);
		}
		if (i > data[index]) {
			index++;
		}
		var n = i*Math.PI/720;
		var x = 150*Math.cos(n);
		var y = 150*Math.sin(n);
		ctx.beginPath();
		ctx.strokeStyle=colors[index];
		ctx.moveTo(250+x/100.0,250+y/100.0);
		ctx.lineTo(250+x,250+y);
		ctx.stroke();
		ctx.closePath();
	}
}
function updateDay(i) {
	ctx.clearRect(0,0,120,100);
	ctx.beginPath();
	ctx.font="20px Arial";
	ctx.fillText("Day " + i/1440,50,50);
	ctx.closePath();
}

</script>

</body>
</html>
